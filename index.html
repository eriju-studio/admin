            常量 {數據} = 等待 _supabase。從（'產品'）。選擇（'*'）。命令（'ID'， { 上升：錯誤的 }）；
            如果 （！數據） 返回；
            文件。getElementById（'產品清單'）。內部 HTML = 數據。地圖（p => `
                <div class="card p-5 flex items-center justify-between">
                    <div class="flex items-center space-x-5">
                        <img src="${p。圖片網址}class="w-16 h-16 object-cover rounded-xl bg-gray-50 border">
                        <div>
                            <span class="status-badge${p。地位？'bg-green-100 text-green-600'：'bg-red-100 text-red-500'}">${p。地位？'供應中'：'缺貨'}</span>
                            <h3 class="font-bold text-gray-900 mt-1">${p。姓名}</h3>
                            <p class="text-xs text-blue-600 font-bold">NT$${p。價格。（）}</p>
                        </div>
                    </div>
                    <button onclick='openEditModal(${JSON。stringify（p）})' class="bg-gray-100 px-5 py-2 rounded-xl text-xs font-bold hover:bg-gray-200">管理</button>
                </div>`）。加入（''）；
        }

        非同步 功能 fetchOrders（） {
            常量 清單 = 文件。getElementById（'訂單列表'）；
            常量 { 數據：訂單 } = 等待 _supabase。從（“命令”）。選擇（'*'）。方程式（'地位'， 目前訂單標籤）。命令（'created_at'， { 上升：錯誤的 }）；
            如果 （！訂單 || 訂單。長度 === 0） {
                清單。內部 HTML = `<div class="text-center py-24 bg-white rounded-[32px] border border-dashed text-gray-400">目前沒有訂單</div>`；
                返回；
            }
            清單。內部 HTML = 訂單。地圖（命令 => `
                <div class="card p-8 邊框-${命令。地位}">
                    <div class="flex justify-between items-start mb-6">
                        <div><h3 class="text-2xl font-black">${命令。使用者名稱}</h3><p class="text-blue-600 font-bold text-lg">${命令。用戶電話}</p></div>
                        <div class="text-right">
                            <p class="text-[10px] text-gray-400 font-mono mb-1">${新的 日期（命令。創建於）。（）}</p>
                            <p class="text-3xl font-black">NT$${命令。總金額。（）}</p>
                        </div>
                    </div>
                    <div class="bg-blue-50/50 p-5 rounded-2xl border border-blue-100 mb-6 text-gray-700 font-medium">${命令。收件地址}</div>
                    <div class="bg-gray-50 rounded-2xl p-5 mb-8 space-y-2 text-sm text-gray-600">
                        ${命令。專案。地圖（我 => `<div class="flex justify-between"><span>${我。姓名}x${我。數量}</span><span class="font-bold text-gray-900">新台幣$${（我。價格 * 我。數量）。（）}</span></div>`）。加入（''）}
                    </div>
                    <div class="flex justify-end gap-3">${渲染訂單按鈕（命令）}</div>
                </div>`）。加入（''）；
        }

        功能 渲染訂單按鈕（命令） {
            如果 （命令。地位 === '待辦的'） 返回 `<button onclick="updateOrderStatus('${命令。ID}', 'processing')" class="bg-blue-600 text-white px-8 py-3 rounded-full text-xs font-bold shadow-lg">開始製作</button>`；
            如果 （命令。地位 === '加工'） 返回 `<button onclick="updateOrderStatus('${命令。ID}', '已交付')" class="bg-green-600 text-white px-8 py-3 rounded-full text-xs font-bold shadow-lg">完成發貨</button>`；
            如果 （命令。地位 === '發表'） 返回 `<button onclick="updateOrderStatus('${命令。ID}', 'completed')" class="bg-gray-800 text-white px-8 py-3 rounded-full text-xs font-bold">手動結案</button>`；
            返回 `<span class="text-xs text-gray-400 font-bold bg-gray-200 px-6 py-3 rounded-full">✅ 交易已完成</span>`；
        }

        非同步 功能 更新訂單狀態（ID， 新狀態） {
            常量 {錯誤} = 等待 _supabase。從（“命令”）。更新（{ 地位：新狀態 }）。方程式（'ID'， ID）；
            如果 （！錯誤） { fetchOrders（）； 刷新徽章（）； }
        }

        非同步 功能 刷新徽章（） {
            常量 {數據} = 等待 _supabase。從（“命令”）。選擇（'地位'）；
            如果（！數據） 返回；
            ['待辦的'， '加工'， '發表'， '完全的']。forEach（s => {
                常量 數數 = 數據。篩選（o => o。地位 === s）。長度；
                常量 點 = 文件。getElementById（`點-${s}`）；
                如果（點） 點。風格。展示 = 數數 > 0？'堵塞'：'沒有任何'；
            }）；
        }

        // --- 介面切換 ---
        窗戶。切換主選項卡 = 功能（t） {
            文件。getElementById（'section-products'）。類別列表。切換（'隱'， t !== '產品'）；
            文件。getElementById（'章節命令'）。類別列表。切換（'隱'， t !== “命令”）；
            文件。getElementById（'main-tab-products'）。類別名 = t === '產品'？'tab-btn 已啟動'：'tab-btn 未啟動'；
            文件。getElementById（'主標籤順序'）。類別名 = t === “命令”？'tab-btn 已啟動'：'tab-btn 未啟動'；
        }

        窗戶。切換順序子選項卡 = 功能（標籤頁） {
            目前訂單標籤 = 標籤頁；
            ['待辦的'， '加工'， '發表'， '完全的']。forEach（t => {
                常量 按鈕 = 文件。getElementById（`order-tab-${t}`）；
                如果（按鈕） 按鈕。類別名 = 標籤頁 === t？'tab-btn active text-xs'：'tab-btn 不活動文字-xs'；
            }）；
            fetchOrders（）；
        }

        // --- 彈跳窗操作 ---
        窗戶。openAddModal = 功能（） {
            文件。getElementById（'編輯表單'）。重置（）；
            文件。getElementById（'edit-id'）。價值 = ''；
            文件。getElementById（'modal-title'）。內部文字 = '新增作品'；
            文件。getElementById（'刪除按鈕'）。風格。展示 = '沒有任何'；
            文件。getElementById（'edit-modal'）。類別列表。添加（'積極的'）；
        }

        窗戶。開啟編輯模態框 = 功能（p） {
            文件。getElementById（'edit-id'）。價值 = p。ID；
            文件。getElementById（'編輯名稱'）。價值 = p。姓名；
            文件。getElementById（'編輯價格'）。價值 = p。價格；
            文件。getElementById（'編輯狀態'）。價值 = p。地位。（）；
            文件。getElementById（'edit-desc'）。價值 = p。描述 || ''；
            文件。getElementById（'edit-img1'）。價值 = p。圖片網址 || ''；
            文件。getElementById（'編輯詳情標題'）。價值 = p。詳情標題 || ''；
            文件。getElementById（'編輯詳情'）。價值 = p。細節 || ''；
            文件。getElementById（'modal-title'）。內部文字 = '編輯作品'；
            文件。getElementById（'刪除按鈕'）。風格。展示 = '堵塞'；
            文件。getElementById（'edit-modal'）。類別列表。添加（'積極的'）；
        }

        窗戶。關閉模態框 = 功能（） { 文件。getElementById（'edit-modal'）。類別列表。消除（'積極的'）； }

        文件。getElementById（'編輯表單'）。新增事件監聽器（'提交'， 非同步 （e） => {
            e。preventDefault（）；
            常量 ID = 文件。getElementById（'edit-id'）。價值；
            常量 有效載荷 = {
                姓名：文件。getElementById（'編輯名稱'）。價值，
                價格：解析整數（文件。getElementById（'編輯價格'）。價值），
                地位：文件。getElementById（'編輯狀態'）。價值 === '真的'，
                描述：文件。getElementById（'edit-desc'）。價值，
                圖片網址：文件。getElementById（'edit-img1'）。價值，
                詳情標題：文件。getElementById（'編輯詳情標題'）。價值，
                細節：文件。getElementById（'編輯詳情'）。價值
            }；
            常量 {錯誤} = ID？等待 _supabase。從（'產品'）。更新（有效載荷）。方程式（'ID'， ID）：等待 _supabase。從（'產品'）。插入（[有效載荷]）；
            如果 （！錯誤） { 關閉模態框（）； fetchProducts（）； } 別的 { 警報（錯誤。訊息）； }
        }）；

        窗戶。刪除產品 = 非同步 功能（） {
            如果（確認（“確定刪除？此動作無法重複。”）） {
                等待 _supabase。從（'產品'）。刪除（）。方程式（'ID'， 文件。getElementById（'edit-id'）。價值）；
                關閉模態框（）； fetchProducts（）；
            }
        }
    </腳本>
</身體>
</html>
